<!DOCTYPE html>
<html>
<head>
  <title>Bitcamp 3조 - HOME</title>
  <meta charset="utf-8">
  <!-- 모바일 반응형을 위한 viewport 설정 -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS 링크 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- index.html용 CSS 링크 -->
  <link rel="stylesheet" type="text/css" href="css/main.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- Bootstrap JavaScript 파일 -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
  <div class="foreground"></div>
  <div class="background"></div>

  <div class="jumbotron">
    <h1>{ Bitcamp Group 3 }</h1>
    <p>We are going to be good developers!</p>
  </div>

  <nav class="navbar navbar-default navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">비트캠프 3조</a>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li class="active"><a href="index.html">홈</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">WEB <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="dragndrop.html">Drag&Drop</a></li>
              <li><a href="mousehover.html">MouseHover</a></li>
              <li><a href="GIFfile.html">GIFfile</a></li>
            </ul>
          </li>
          <li><a href="test1.html">자기소개</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="about.html">About</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
		<div style="float:left;">
			<video id="vid" width="100%" controls style="float:left">
		  		<source src="videos/mov_bbb.mp4" type="video/mp4">
			</video>
			<br>
			<input type="button" id="btn" value="스크린샷">
			<input type="button" id="btnmove" value="움짤만들기">
		</div>

		<div id="movediv" style="float:right;">
			<canvas id="canmove">
		</div>
		<hr style="clear: both;">
		<p>당신이 고른 사진</p>
		<div id="parentdiv"></div>
  </div>

  <script>
		window.onload = function() {
				var i = 1;
				var j = 1;
				document.getElementById("btn").onclick = function(){ //스크린샷 버튼 클릭
						var canvars = document.createElement("canvas"); //캔버스생성
						canvars.setAttribute("id", "myCanvas"+j); //id명 생성
						j++;

						var vid = document.getElementById("vid"); //vid 가져오기
						canvars.getContext("2d").drawImage(vid, 10, 10); //스크린샷~~

						var btn = document.createElement("input"); //input 생성
						btn.setAttribute("type", "button"); //type은 버튼
						btn.setAttribute("value", "삭제"); //value 값 삭제
						btn.setAttribute("onclick", "del("+i+")"); //type은 버튼


						var childdiv = document.createElement("div"); //div 생성 (childdiv)
						childdiv.setAttribute("id", "childdiv"+i); //id = childdiv+i
						childdiv.setAttribute("style", "float: left;"); //float로 띄우기

						i++;

						var parentdiv = document.getElementById("parentdiv"); //parentdiv 가져오기

						childdiv.appendChild(canvars); //childdiv의 자식 캔퍼스 생성
						childdiv.appendChild(btn); //캔퍼스와 형제 버튼 생성

						parentdiv.appendChild(childdiv); //parentdiv 자식 appendChild넣기
					}

				/*
				setInterval() -> 여러번
				setTimeout() -> 한번
				기본 javascript 자원과 jquery 혼용
				*/

				document.getElementById("btnmove").onclick = function(){ //버튼클릭
					var canarr = []; //배열생성
					var number = 0; //배열 인덱스
					for(k = 1; k <= j; k++){ //배열 push
						if(document.getElementById("myCanvas"+k) != null){ //만약 스크린샷을 찍고 삭제한게 있을 수 있기 때문
							canarr.push(document.getElementById("myCanvas"+k)); //스크린샷 찍은 것들을 배열에 push
						}
					}

					setInterval(function() { //0.2초 마다 실행
						var canvas = document.getElementById("canmove"); //캔버스
						canvas.getContext("2d").drawImage(canarr[number], 10, 10); //캔버스에 이미지를 그리다
						number++;
						if(number >= canarr.length){
							number = 0; //계속 돌아갈 수 있게
						}
					}, 200);
				}
		}

		function del(number){
			var childdiv = document.getElementById("childdiv"+number);
			var parentdiv = document.getElementById("parentdiv");

			parentdiv.removeChild(childdiv);
		}
	</script>
</body>
</html>
